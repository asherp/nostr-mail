<DrawerClickableItem@MDNavigationDrawerItem>
    focus_color: "#e7e4c0"
    text_color: "#4a4939"
    icon_color: "#4a4939"
    ripple_color: "#c5bdd2"
    selected_color: "#0c6c4d"


<DrawerLabelItem@MDNavigationDrawerItem>
    text_color: "#4a4939"
    icon_color: "#4a4939"
    focus_behavior: False
    selected_color: "#4a4939"
    _no_ripple_effect: True


<RelayScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        padding: "16dp"

        MDTopAppBar:
            title: "Relays"
            elevation: 4
            pos_hint: {"top": 1}
            md_bg_color: "#e7e4c0"
            specific_text_color: "#4a4939"
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("open")]]
        ScrollView:
            MDList:
                id: relay_list
                # This will be populated with the list of relays

        MDFloatingActionButton:
            icon: "plus"
            pos_hint: {'right': 0.95, 'bottom': 0.05}
            on_release: root.add_relay()

        MDRaisedButton:
            text: 'Load Default Relays'
            on_release: root.load_default_relays()


<SettingsScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        padding: "16dp"

        MDTopAppBar:
            title: "Settings"
            elevation: 4
            pos_hint: {"top": 1}
            md_bg_color: "#e7e4c0"
            specific_text_color: "#4a4939"
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("open")]]

        ScrollView:
            MDList:
                MDTextField:
                    id: priv_key
                    hint_text: "Enter priv key (nsec format)"
                    password: True
                    helper_text: "Nostr Private Key"
                    helper_text_mode: "on_focus"
                MDTextField:
                    id: pub_key
                    hint_text: "Nostr Pub Key"
                    readonly: True
                    helper_text: "Nostr Public Key"
                    helper_text_mode: "on_focus"
                    helper_text_color: app.theme_cls.error_color if root.error else app.theme_cls.secondary_text_color
                    theme_text_color: "Primary"
                MDTextField:
                    id: email_address
                    hint_text: "Enter email"
                    helper_text: "Email"
                    helper_text_mode: "on_focus"
                MDTextField:
                    id: email_password
                    hint_text: "Enter Password"
                    password: True  # hides the text
                    helper_text: "Password"
                    helper_text_mode: "on_focus"
                MDTextField:
                    id: imap_host
                    hint_text: "imap.example.com"
                    helper_text: "IMAP Host"
                    helper_text_mode: "on_focus"
                MDTextField:
                    id: imap_port
                    hint_text: "2525"
                    input_filter: 'int'  # allows only integer input
                    helper_text: "IMAP Port"
                    helper_text_mode: "on_focus"
                MDTextField:
                    id: smtp_host
                    hint_text: "smtp.example.com"
                    helper_text: "SMTP Host"
                    helper_text_mode: "on_focus"
                MDTextField:
                    id: smtp_port
                    hint_text: "587"
                    input_filter: 'int'  # allows only integer input
                    helper_text: "SMTP Port"
                    helper_text_mode: "on_focus"
        MDRaisedButton:
            text: "Save"
            on_release: root.save_settings()

<ProfileScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        padding: "16dp"

        MDTopAppBar:
            title: "Profile"
            elevation: 4
            pos_hint: {"top": 1}
            md_bg_color: "#e7e4c0"
            specific_text_color: "#4a4939"
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("open")]]

        ScrollView:
            MDList:
                MDTextField:
                    id: display_name
                    hint_text: "Display Name"
                MDTextField:
                    id: name
                    hint_text: "Name"
                MDTextField:
                    id: picture_url
                    hint_text: "Picture URL"
                MDTextField:
                    id: about
                    hint_text: "About"
                MDTextField:
                    id: email
                    hint_text: "Email"


<ContactsScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        padding: "16dp"

        MDTopAppBar:
            title: "Contacts"
            elevation: 4
            pos_hint: {"top": 1}
            md_bg_color: "#e7e4c0"
            specific_text_color: "#4a4939"
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("open")]]

        ScrollView:
            MDList:
                id: contacts_list
                # You could populate this list dynamically in your app



MDScreen:

    MDNavigationLayout:

        MDScreenManager:
            id: screen_manager

            MDScreen:
                name: 'main_screen'

                MDTopAppBar:
                    title: "Navigation Drawer"
                    elevation: 4
                    pos_hint: {"top": 1}
                    md_bg_color: "#e7e4c0"
                    specific_text_color: "#4a4939"
                    left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]

            RelayScreen:
                name: 'relay_screen'
                id: relay_screen

            SettingsScreen:
                name: 'settings_screen'
                id: settings_screen

            ProfileScreen:  # Now directly inside the ScreenManager
                name: 'profile_screen'
                id: profile_screen

            MDScreen:
                name: 'contacts_screen'  # name of the new contacts screen
                BoxLayout:
                    orientation: 'vertical'
                    ContactsScreen:


            MDScreen:
                name: 'inbox_screen'  # name of the new screen

                MDBoxLayout:
                    orientation: 'vertical'

                    MDTopAppBar:
                        title: "Inbox"
                        elevation: 4
                        pos_hint: {"top": 1}
                        md_bg_color: "#e7e4c0"
                        specific_text_color: "#4a4939"
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]

                    ScrollView:
                        MDList:
                            id: message_list
                            OneLineAvatarListItem:
                                text: "Message 1"
                                ImageLeftWidget:
                                    source: app.avatars[0] if app.avatars else "default_avatar.png"  # now it's a file path



            MDScreen:
                name: 'compose_screen'

                MDBoxLayout:
                    orientation: 'vertical'
                    padding: "16dp"

                    MDTopAppBar:
                        title: "Compose"
                        elevation: 4
                        pos_hint: {"top": 1}
                        md_bg_color: "#e7e4c0"
                        specific_text_color: "#4a4939"
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]

                    BoxLayout:
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: 'vertical'
                        padding: "16dp", "8dp", "16dp", "0dp"

                        MDTextField:
                            hint_text: 'Recipient'
                            multiline: False

                        MDTextField:
                            hint_text: 'Subject'
                            multiline: False

                    BoxLayout:
                        size_hint_y: 1
                        padding: "16dp", "8dp", "16dp", "0dp"

                        MDTextField:
                            hint_text: 'Message'
                            multiline: True
                            size_hint_y: 1

                    BoxLayout:
                        size_hint_y: None
                        height: '48dp'
                        padding: "16dp", "8dp", "16dp", "16dp"

                        MDRaisedButton:
                            text: 'Send'
                            size_hint: None, None
                            size: '64dp', '48dp'
                            pos_hint: {'right': 1}

        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)

            MDNavigationDrawerMenu:

                MDNavigationDrawerHeader:
                    title: "NostrMail"
                    title_color: "#4a4939"
                    text: "Email and other stuff"
                    spacing: "4dp"
                    padding: "12dp", 0, 0, "56dp"

                MDNavigationDrawerLabel:
                    text: "Mail"

                DrawerClickableItem:
                    icon: "account-circle-outline"
                    text: "Profile"
                    on_release:
                        app.root.ids.screen_manager.current = 'profile_screen'
                        nav_drawer.set_state("close")

                DrawerClickableItem:
                    icon: "account-multiple-outline"
                    text: "Contacts"
                    on_release:
                        app.root.ids.screen_manager.current = 'contacts_screen'
                        nav_drawer.set_state("close")

                DrawerClickableItem:
                    icon: "gmail"
                    right_text: "+99"
                    text_right_color: "#4a4939"
                    text: "Inbox"
                    on_release:
                        app.root.ids.screen_manager.current = 'inbox_screen'  # switch to the inbox screen
                        nav_drawer.set_state("close")

                DrawerClickableItem:
                    icon: "send"
                    text: "Outbox"

                DrawerClickableItem:
                    icon: "pencil"
                    text: "Compose"
                    on_release:
                        app.root.ids.screen_manager.current = 'compose_screen'
                        nav_drawer.set_state("close")

                DrawerClickableItem:
                    icon: "cog"
                    text: "Settings"
                    on_release:
                        app.root.ids.screen_manager.current = 'settings_screen'
                        nav_drawer.set_state("close")


                DrawerClickableItem:
                    icon: "satellite-uplink"
                    text: "Relays"
                    on_release:
                        app.root.ids.screen_manager.current = 'relay_screen'
                        nav_drawer.set_state("close")

