<SettingsScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        padding: "16dp"

        MDTopAppBar:
            title: "Settings"
            elevation: 4
            pos_hint: {"top": 1}
            md_bg_color: "#e7e4c0"
            specific_text_color: "#4a4939"
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("open")]]
            right_action_items: [["email-outline", lambda x: root.test_email_connection()]]


        ScrollView:
            MDList:
                MDTextField:
                    id: priv_key
                    on_text: root.priv_key = self.text
                    hint_text: "Enter priv key (nsec format)"
                    password: True
                    text: root.priv_key  # Bind the text to the priv_key StringProperty
                    helper_text: "Nostr Private Key"
                    helper_text_mode: "on_focus"
                    right_action_items: [['eye-off', lambda x: root.toggle_priv_key_visibility()]]
                MDTextField:
                    id: pub_key
                    hint_text: "Nostr Pub Key"
                    readonly: True
                    helper_text: "Nostr Public Key"
                    helper_text_mode: "on_focus"
                    helper_text_color: app.theme_cls.error_color if root.error else app.theme_cls.secondary_text_color
                    theme_text_color: "Primary"
                MDTextField:
                    id: email_address
                    hint_text: "Enter email"
                    helper_text: "Email"
                    helper_text_mode: "on_focus"
                MDTextField:
                    id: email_password
                    hint_text: "Enter Password"
                    password: True  # hides the text
                    helper_text: "Password"
                    helper_text_mode: "on_focus"
                MDTextField:
                    id: imap_host
                    hint_text: "imap.example.com"
                    helper_text: "IMAP Host"
                    helper_text_mode: "on_focus"
                MDTextField:
                    id: imap_port
                    hint_text: "IMAP Port"
                    text: "2525"
                    input_filter: 'int'  # allows only integer input
                    helper_text: "IMAP Port"
                    helper_text_mode: "on_focus"
                MDTextField:
                    id: smtp_host
                    hint_text: "smtp.example.com"
                    helper_text: "SMTP Host"
                    helper_text_mode: "on_focus"
                MDTextField:
                    id: smtp_port
                    text: "587"  # Default port value displayed
                    hint_text: "SMTP Port"
                    input_filter: 'int'  # allows only integer input
                    helper_text: "This is the default SMTP port."
                    helper_text_mode: "on_focus"
        MDRaisedButton:
            text: "Save"
            on_release: root.save_settings()