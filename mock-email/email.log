[2026-01-26T06:33:29Z INFO  mock_email] Starting mock-email server
[2026-01-26T06:33:29Z INFO  mock_email] Configuration: Config { smtp_port: 2525, imap_port: 1143, preload_emails: None, log_level: "info", log_file: None, generate_fake_emails: None, output_emails: None, seed: 0 }
[2026-01-26T06:33:29Z INFO  mock_email] Mock email server running:
[2026-01-26T06:33:29Z INFO  mock_email]   SMTP: smtp://0.0.0.0:2525
[2026-01-26T06:33:29Z INFO  mock_email::smtp] Mock SMTP server listening on smtp://0.0.0.0:2525
[2026-01-26T06:33:29Z INFO  mock_email::imap] Mock IMAP server listening on imap://0.0.0.0:1143
[2026-01-26T06:33:29Z INFO  mock_email]   IMAP: imap://0.0.0.0:1143
[2026-01-26T06:33:29Z INFO  mock_email] Press Ctrl+C to stop.
[2026-01-26T06:33:41Z INFO  mock_email::smtp] New SMTP connection from 172.18.0.1:63500
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] 172.18.0.1:63500 AUTH PLAIN: Accepted (mock server accepts any credentials)
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Raw email data (first 500 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Message-ID: <67ce0ae8-93ff-4311-b1be-c59517aedc4e@nostr-mail>
    X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
    X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
    Content-Transfer-Encoding: 7bit
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    
    -----BEGIN NOSTR NIP-04 ENCRYPTED MESSAGE-
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Header section (456 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Message-ID: <67ce0ae8-93ff-4311-b1be-c59517aedc4e@nostr-mail>
    X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
    X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
    Content-Transfer-Encoding: 7bit
    Date: Mon, 26 Jan 2026 06:33:41 +0000
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Parsed header: From = alice@example.com
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Parsed header: To = bob@test.org
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Parsed header: Subject = UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Parsed header: Message-ID = <67ce0ae8-93ff-4311-b1be-c59517aedc4e@nostr-mail>
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Parsed header: X-Nostr-Pubkey = npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Parsed header: X-Nostr-Sig = ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Parsed header: Content-Transfer-Encoding = 7bit
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Parsed header: Date = Mon, 26 Jan 2026 06:33:41 +0000
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Stored headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Found X-Nostr-Pubkey header: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Storing email: id=665a0c25-22fd-4850-90aa-a33f00b6deca, from=alice@example.com, to=["bob@test.org"]
[2026-01-26T06:33:41Z INFO  mock_email::store] [STORE] Added email 665a0c25-22fd-4850-90aa-a33f00b6deca to mailbox 'INBOX' (mailbox now has 1 emails)
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Stored email 665a0c25-22fd-4850-90aa-a33f00b6deca in INBOX for recipient bob@test.org
[2026-01-26T06:33:41Z INFO  mock_email::store] [STORE] Added email 665a0c25-22fd-4850-90aa-a33f00b6deca to mailbox 'Sent' (mailbox now has 1 emails)
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] Stored email 665a0c25-22fd-4850-90aa-a33f00b6deca in Sent mailbox for sender alice@example.com
[2026-01-26T06:33:41Z INFO  mock_email::smtp] [SMTP] 172.18.0.1:63500 Email accepted: alice@example.com -> ["bob@test.org"]
[2026-01-26T06:33:41Z INFO  mock_email::smtp] SMTP connection from 172.18.0.1:63500 closed
[2026-01-26T06:33:41Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:58640
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58640 LOGIN: "alice@example.com"
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58640 LIST
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58640 LIST completed: 4 mailboxes
[2026-01-26T06:33:41Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:33:41Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 1 email IDs, returning 1 emails
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58640 SELECT: Sent (1 emails)
[2026-01-26T06:33:41Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:33:41Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 1 email IDs, returning 1 emails
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58640 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58640 SEARCH completed: found 1 messages
[2026-01-26T06:33:41Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:33:41Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 1 email IDs, returning 1 emails
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58640 FETCH: mailbox=Sent, sequence=1, data_items=RFC822, matching_indices=[1]
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {630}
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58640 FETCH completed: fetched 1 messages
[2026-01-26T06:33:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58640 LOGOUT
[2026-01-26T06:33:41Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:58640 closed
[2026-01-26T06:34:44Z INFO  mock_email::smtp] New SMTP connection from 172.18.0.1:65128
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] 172.18.0.1:65128 AUTH PLAIN: Accepted (mock server accepts any credentials)
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] Raw email data (first 500 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Message-ID: <8aec10ae-8012-49c2-8f6c-c374f61f4664@nostr-mail>
    Content-Transfer-Encoding: 7bit
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    
    in plaintext
    
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] Header section (204 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Message-ID: <8aec10ae-8012-49c2-8f6c-c374f61f4664@nostr-mail>
    Content-Transfer-Encoding: 7bit
    Date: Mon, 26 Jan 2026 06:34:44 +0000
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] Parsed header: From = alice@example.com
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] Parsed header: To = bob@test.org
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] Parsed header: Subject = checking if this works
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] Parsed header: Message-ID = <8aec10ae-8012-49c2-8f6c-c374f61f4664@nostr-mail>
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] Parsed header: Content-Transfer-Encoding = 7bit
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] Parsed header: Date = Mon, 26 Jan 2026 06:34:44 +0000
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] Stored headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] X-Nostr-Pubkey header NOT found in stored headers
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] Storing email: id=a35b6fd7-b63f-4869-9662-f2367ae734f4, from=alice@example.com, to=["bob@test.org"]
[2026-01-26T06:34:44Z INFO  mock_email::store] [STORE] Added email a35b6fd7-b63f-4869-9662-f2367ae734f4 to mailbox 'INBOX' (mailbox now has 2 emails)
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] Stored email a35b6fd7-b63f-4869-9662-f2367ae734f4 in INBOX for recipient bob@test.org
[2026-01-26T06:34:44Z INFO  mock_email::store] [STORE] Added email a35b6fd7-b63f-4869-9662-f2367ae734f4 to mailbox 'Sent' (mailbox now has 2 emails)
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] Stored email a35b6fd7-b63f-4869-9662-f2367ae734f4 in Sent mailbox for sender alice@example.com
[2026-01-26T06:34:44Z INFO  mock_email::smtp] [SMTP] 172.18.0.1:65128 Email accepted: alice@example.com -> ["bob@test.org"]
[2026-01-26T06:34:44Z INFO  mock_email::smtp] SMTP connection from 172.18.0.1:65128 closed
[2026-01-26T06:34:44Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:63862
[2026-01-26T06:34:44Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63862 LOGIN: "alice@example.com"
[2026-01-26T06:34:44Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63862 LIST
[2026-01-26T06:34:44Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63862 LIST completed: 4 mailboxes
[2026-01-26T06:34:44Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:34:44Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:34:44Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63862 SELECT: Sent (2 emails)
[2026-01-26T06:34:44Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:34:44Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:34:44Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63862 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:34:44Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63862 SEARCH completed: found 2 messages
[2026-01-26T06:34:45Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:34:45Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63862 FETCH: mailbox=Sent, sequence=1,2, data_items=RFC822, matching_indices=[1, 2]
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {224}
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {630}
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63862 FETCH completed: fetched 2 messages
[2026-01-26T06:34:45Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63862 LOGOUT
[2026-01-26T06:34:45Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:63862 closed
[2026-01-26T06:34:50Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:63866
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63866 LOGIN: "alice@example.com"
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63866 LIST
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63866 LIST completed: 4 mailboxes
[2026-01-26T06:34:50Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:34:50Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63866 SELECT: Sent (2 emails)
[2026-01-26T06:34:50Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:34:50Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63866 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63866 SEARCH completed: found 2 messages
[2026-01-26T06:34:50Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:34:50Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63866 FETCH: mailbox=Sent, sequence=2,1, data_items=RFC822, matching_indices=[2, 1]
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {630}
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {224}
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63866 FETCH completed: fetched 2 messages
[2026-01-26T06:34:50Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63866 LOGOUT
[2026-01-26T06:34:50Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:63866 closed
[2026-01-26T06:35:00Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:58140
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58140 LOGIN: "alice@example.com"
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58140 LIST
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58140 LIST completed: 4 mailboxes
[2026-01-26T06:35:00Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:35:00Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58140 SELECT: Sent (2 emails)
[2026-01-26T06:35:00Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:35:00Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58140 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58140 SEARCH completed: found 2 messages
[2026-01-26T06:35:00Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:35:00Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58140 FETCH: mailbox=Sent, sequence=2,1, data_items=RFC822, matching_indices=[2, 1]
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {630}
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {224}
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58140 FETCH completed: fetched 2 messages
[2026-01-26T06:35:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58140 LOGOUT
[2026-01-26T06:35:00Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:58140 closed
[2026-01-26T06:36:42Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:59820
[2026-01-26T06:36:42Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59820 LOGIN: "alice@example.com"
[2026-01-26T06:36:42Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59820 LIST
[2026-01-26T06:36:42Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59820 LIST completed: 4 mailboxes
[2026-01-26T06:36:42Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59820 LOGOUT
[2026-01-26T06:36:42Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:59820 closed
[2026-01-26T06:36:42Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:59826
[2026-01-26T06:36:42Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59826 LOGIN: "alice@example.com"
[2026-01-26T06:36:42Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59826 LIST
[2026-01-26T06:36:42Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59826 LIST completed: 4 mailboxes
[2026-01-26T06:36:42Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59826 LOGOUT
[2026-01-26T06:36:42Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:59826 closed
[2026-01-26T06:38:12Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:64698
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64698 LOGIN: "alice@example.com"
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64698 LIST
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64698 LIST completed: 4 mailboxes
[2026-01-26T06:38:12Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:38:12Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64698 SELECT: Sent (2 emails)
[2026-01-26T06:38:12Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:38:12Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64698 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64698 SEARCH completed: found 2 messages
[2026-01-26T06:38:12Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:38:12Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64698 FETCH: mailbox=Sent, sequence=1,2, data_items=RFC822, matching_indices=[1, 2]
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {224}
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {630}
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64698 FETCH completed: fetched 2 messages
[2026-01-26T06:38:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64698 LOGOUT
[2026-01-26T06:38:12Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:64698 closed
[2026-01-26T06:39:33Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:60596
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60596 LOGIN: "alice@example.com"
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60596 LIST
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60596 LIST completed: 4 mailboxes
[2026-01-26T06:39:33Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:39:33Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60596 SELECT: Sent (2 emails)
[2026-01-26T06:39:33Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:39:33Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60596 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60596 SEARCH completed: found 2 messages
[2026-01-26T06:39:33Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:39:33Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60596 FETCH: mailbox=Sent, sequence=1,2, data_items=RFC822, matching_indices=[1, 2]
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {224}
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {630}
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60596 FETCH completed: fetched 2 messages
[2026-01-26T06:39:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60596 LOGOUT
[2026-01-26T06:39:33Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:60596 closed
[2026-01-26T06:39:59Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:64896
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64896 LOGIN: "alice@example.com"
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64896 LIST
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64896 LIST completed: 4 mailboxes
[2026-01-26T06:39:59Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:39:59Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64896 SELECT: Sent (2 emails)
[2026-01-26T06:39:59Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:39:59Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64896 SEARCH: mailbox=Sent, criteria=ALL SINCE 01-Jan-1970
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64896 SEARCH completed: found 2 messages
[2026-01-26T06:39:59Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:39:59Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64896 FETCH: mailbox=Sent, sequence=2,1, data_items=RFC822, matching_indices=[2, 1]
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {630}
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {224}
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:39:59Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64896 FETCH completed: fetched 2 messages
[2026-01-26T06:40:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64896 LOGOUT
[2026-01-26T06:40:00Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:64896 closed
[2026-01-26T06:40:06Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:59456
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59456 LOGIN: "alice@example.com"
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59456 LIST
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59456 LIST completed: 4 mailboxes
[2026-01-26T06:40:06Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:40:06Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59456 SELECT: Sent (2 emails)
[2026-01-26T06:40:06Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:40:06Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59456 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59456 SEARCH completed: found 2 messages
[2026-01-26T06:40:06Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:40:06Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59456 FETCH: mailbox=Sent, sequence=2,1, data_items=RFC822, matching_indices=[2, 1]
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {630}
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {224}
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59456 FETCH completed: fetched 2 messages
[2026-01-26T06:40:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:59456 LOGOUT
[2026-01-26T06:40:06Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:59456 closed
[2026-01-26T06:40:27Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:63054
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63054 LOGIN: "alice@example.com"
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63054 LIST
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63054 LIST completed: 4 mailboxes
[2026-01-26T06:40:27Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:40:27Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63054 SELECT: Sent (2 emails)
[2026-01-26T06:40:27Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:40:27Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63054 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63054 SEARCH completed: found 2 messages
[2026-01-26T06:40:27Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:40:27Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 2 email IDs, returning 2 emails
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63054 FETCH: mailbox=Sent, sequence=2,1, data_items=RFC822, matching_indices=[2, 1]
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {630}
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {224}
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63054 FETCH completed: fetched 2 messages
[2026-01-26T06:40:27Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63054 LOGOUT
[2026-01-26T06:40:27Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:63054 closed
[2026-01-26T06:40:33Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:57810
[2026-01-26T06:40:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57810 LOGIN: "alice@example.com"
[2026-01-26T06:40:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57810 LIST
[2026-01-26T06:40:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57810 LIST completed: 4 mailboxes
[2026-01-26T06:40:33Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57810 LOGOUT
[2026-01-26T06:40:33Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:57810 closed
[2026-01-26T06:41:05Z INFO  mock_email::smtp] New SMTP connection from 172.18.0.1:56802
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] 172.18.0.1:56802 AUTH PLAIN: Accepted (mock server accepts any credentials)
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] Raw email data (first 500 chars): From: alice@example.com
    To: grace@test.org
    Subject: this is for grace
    Message-ID: <8cdc3a20-baf3-428d-a4f3-42ac3ff4c36e@nostr-mail>
    Content-Transfer-Encoding: 7bit
    Date: Mon, 26 Jan 2026 06:41:05 +0000
    
    can you read it?
    
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] Header section (201 chars): From: alice@example.com
    To: grace@test.org
    Subject: this is for grace
    Message-ID: <8cdc3a20-baf3-428d-a4f3-42ac3ff4c36e@nostr-mail>
    Content-Transfer-Encoding: 7bit
    Date: Mon, 26 Jan 2026 06:41:05 +0000
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] Parsed header: From = alice@example.com
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] Parsed header: To = grace@test.org
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] Parsed header: Subject = this is for grace
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] Parsed header: Message-ID = <8cdc3a20-baf3-428d-a4f3-42ac3ff4c36e@nostr-mail>
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] Parsed header: Content-Transfer-Encoding = 7bit
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] Parsed header: Date = Mon, 26 Jan 2026 06:41:05 +0000
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] Stored headers: ["Content-Transfer-Encoding", "from", "Subject", "message-id", "Message-ID", "From", "subject", "to", "Date", "To"]
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] X-Nostr-Pubkey header NOT found in stored headers
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] Storing email: id=95314b5e-1640-460e-b6a8-41308ef15407, from=alice@example.com, to=["grace@test.org"]
[2026-01-26T06:41:05Z INFO  mock_email::store] [STORE] Added email 95314b5e-1640-460e-b6a8-41308ef15407 to mailbox 'INBOX' (mailbox now has 3 emails)
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] Stored email 95314b5e-1640-460e-b6a8-41308ef15407 in INBOX for recipient grace@test.org
[2026-01-26T06:41:05Z INFO  mock_email::store] [STORE] Added email 95314b5e-1640-460e-b6a8-41308ef15407 to mailbox 'Sent' (mailbox now has 3 emails)
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] Stored email 95314b5e-1640-460e-b6a8-41308ef15407 in Sent mailbox for sender alice@example.com
[2026-01-26T06:41:05Z INFO  mock_email::smtp] [SMTP] 172.18.0.1:56802 Email accepted: alice@example.com -> ["grace@test.org"]
[2026-01-26T06:41:05Z INFO  mock_email::smtp] SMTP connection from 172.18.0.1:56802 closed
[2026-01-26T06:41:05Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:62762
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] 172.18.0.1:62762 LOGIN: "alice@example.com"
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] 172.18.0.1:62762 LIST
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] 172.18.0.1:62762 LIST completed: 4 mailboxes
[2026-01-26T06:41:05Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:41:05Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 3 email IDs, returning 3 emails
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] 172.18.0.1:62762 SELECT: Sent (3 emails)
[2026-01-26T06:41:05Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:41:05Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 3 email IDs, returning 3 emails
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] 172.18.0.1:62762 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] 172.18.0.1:62762 SEARCH completed: found 3 messages
[2026-01-26T06:41:05Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:41:05Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 3 email IDs, returning 3 emails
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] 172.18.0.1:62762 FETCH: mailbox=Sent, sequence=1,2,3, data_items=RFC822, matching_indices=[1, 2, 3]
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["Content-Transfer-Encoding", "from", "Subject", "message-id", "Message-ID", "From", "subject", "to", "Date", "To"]
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {225}
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: grace@test.org
    Subject: this is for grace
    Date: Mon, 26 Jan 2026 06:41:05 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding: 7
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r?ti daer"
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 253 bytes (25 header + 225 body + 3 closing)
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {224}
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 3 FETCH (RFC822 {630}
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] 172.18.0.1:62762 FETCH completed: fetched 3 messages
[2026-01-26T06:41:05Z INFO  mock_email::imap] [IMAP] 172.18.0.1:62762 LOGOUT
[2026-01-26T06:41:05Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:62762 closed
[2026-01-26T06:41:12Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:65014
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:65014 LOGIN: "alice@example.com"
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:65014 LIST
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:65014 LIST completed: 4 mailboxes
[2026-01-26T06:41:12Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:41:12Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 3 email IDs, returning 3 emails
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:65014 SELECT: Sent (3 emails)
[2026-01-26T06:41:12Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:41:12Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 3 email IDs, returning 3 emails
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:65014 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:65014 SEARCH completed: found 3 messages
[2026-01-26T06:41:12Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:41:12Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 3 email IDs, returning 3 emails
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:65014 FETCH: mailbox=Sent, sequence=2,1,3, data_items=RFC822, matching_indices=[2, 1, 3]
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {224}
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["Content-Transfer-Encoding", "from", "Subject", "message-id", "Message-ID", "From", "subject", "to", "Date", "To"]
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {225}
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: grace@test.org
    Subject: this is for grace
    Date: Mon, 26 Jan 2026 06:41:05 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding: 7
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r?ti daer"
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 253 bytes (25 header + 225 body + 3 closing)
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 3 FETCH (RFC822 {630}
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:65014 FETCH completed: fetched 3 messages
[2026-01-26T06:41:12Z INFO  mock_email::imap] [IMAP] 172.18.0.1:65014 LOGOUT
[2026-01-26T06:41:12Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:65014 closed
[2026-01-26T06:42:41Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:60526
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60526 LOGIN: "alice@example.com"
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60526 LIST
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60526 LIST completed: 4 mailboxes
[2026-01-26T06:42:41Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:42:41Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 3 email IDs, returning 3 emails
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60526 SELECT: Sent (3 emails)
[2026-01-26T06:42:41Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:42:41Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 3 email IDs, returning 3 emails
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60526 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60526 SEARCH completed: found 3 messages
[2026-01-26T06:42:41Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:42:41Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 3 email IDs, returning 3 emails
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60526 FETCH: mailbox=Sent, sequence=3,2,1, data_items=RFC822, matching_indices=[3, 2, 1]
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 3 FETCH (RFC822 {630}
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {224}
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["Content-Transfer-Encoding", "from", "Subject", "message-id", "Message-ID", "From", "subject", "to", "Date", "To"]
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {225}
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: grace@test.org
    Subject: this is for grace
    Date: Mon, 26 Jan 2026 06:41:05 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding: 7
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r?ti daer"
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 253 bytes (25 header + 225 body + 3 closing)
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60526 FETCH completed: fetched 3 messages
[2026-01-26T06:42:41Z INFO  mock_email::imap] [IMAP] 172.18.0.1:60526 LOGOUT
[2026-01-26T06:42:41Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:60526 closed
[2026-01-26T06:42:47Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:58034
[2026-01-26T06:42:47Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58034 LOGIN: "alice@example.com"
[2026-01-26T06:42:47Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58034 LIST
[2026-01-26T06:42:47Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58034 LIST completed: 4 mailboxes
[2026-01-26T06:42:47Z INFO  mock_email::imap] [IMAP] 172.18.0.1:58034 LOGOUT
[2026-01-26T06:42:47Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:58034 closed
[2026-01-26T06:43:00Z INFO  mock_email::smtp] New SMTP connection from 172.18.0.1:63198
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] 172.18.0.1:63198 AUTH PLAIN: Accepted (mock server accepts any credentials)
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] Raw email data (first 500 chars): From: alice@example.com
    To: charlie@test.org
    Subject: will this work?
    Message-ID: <c2084352-1ea9-43ea-952a-a070751aeddb@nostr-mail>
    Content-Transfer-Encoding: 7bit
    Date: Mon, 26 Jan 2026 06:43:00 +0000
    
    Idk
    
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] Header section (201 chars): From: alice@example.com
    To: charlie@test.org
    Subject: will this work?
    Message-ID: <c2084352-1ea9-43ea-952a-a070751aeddb@nostr-mail>
    Content-Transfer-Encoding: 7bit
    Date: Mon, 26 Jan 2026 06:43:00 +0000
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] Parsed header: From = alice@example.com
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] Parsed header: To = charlie@test.org
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] Parsed header: Subject = will this work?
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] Parsed header: Message-ID = <c2084352-1ea9-43ea-952a-a070751aeddb@nostr-mail>
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] Parsed header: Content-Transfer-Encoding = 7bit
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] Parsed header: Date = Mon, 26 Jan 2026 06:43:00 +0000
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] Stored headers: ["To", "Content-Transfer-Encoding", "message-id", "From", "Date", "Subject", "Message-ID", "subject", "from", "to"]
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] X-Nostr-Pubkey header NOT found in stored headers
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] Storing email: id=cfafe342-b324-4c78-bd16-c0680aa9f0dc, from=alice@example.com, to=["charlie@test.org"]
[2026-01-26T06:43:00Z INFO  mock_email::store] [STORE] Added email cfafe342-b324-4c78-bd16-c0680aa9f0dc to mailbox 'INBOX' (mailbox now has 4 emails)
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] Stored email cfafe342-b324-4c78-bd16-c0680aa9f0dc in INBOX for recipient charlie@test.org
[2026-01-26T06:43:00Z INFO  mock_email::store] [STORE] Added email cfafe342-b324-4c78-bd16-c0680aa9f0dc to mailbox 'Sent' (mailbox now has 4 emails)
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] Stored email cfafe342-b324-4c78-bd16-c0680aa9f0dc in Sent mailbox for sender alice@example.com
[2026-01-26T06:43:00Z INFO  mock_email::smtp] [SMTP] 172.18.0.1:63198 Email accepted: alice@example.com -> ["charlie@test.org"]
[2026-01-26T06:43:00Z INFO  mock_email::smtp] SMTP connection from 172.18.0.1:63198 closed
[2026-01-26T06:43:00Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:57628
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57628 LOGIN: "alice@example.com"
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57628 LIST
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57628 LIST completed: 4 mailboxes
[2026-01-26T06:43:00Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:43:00Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 4 email IDs, returning 4 emails
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57628 SELECT: Sent (4 emails)
[2026-01-26T06:43:00Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:43:00Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 4 email IDs, returning 4 emails
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57628 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57628 SEARCH completed: found 4 messages
[2026-01-26T06:43:00Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:43:00Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 4 email IDs, returning 4 emails
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57628 FETCH: mailbox=Sent, sequence=2,4,3,1, data_items=RFC822, matching_indices=[2, 4, 3, 1]
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["Content-Transfer-Encoding", "from", "Subject", "message-id", "Message-ID", "From", "subject", "to", "Date", "To"]
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {225}
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: grace@test.org
    Subject: this is for grace
    Date: Mon, 26 Jan 2026 06:41:05 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding: 7
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r?ti daer"
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 253 bytes (25 header + 225 body + 3 closing)
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 4 FETCH (RFC822 {630}
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 3 FETCH (RFC822 {224}
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "Content-Transfer-Encoding", "message-id", "From", "Date", "Subject", "Message-ID", "subject", "from", "to"]
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {212}
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: charlie@test.org
    Subject: will this work?
    Date: Mon, 26 Jan 2026 06:43:00 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding: 7
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rkdI\n\r\n\rt"
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 240 bytes (25 header + 212 body + 3 closing)
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57628 FETCH completed: fetched 4 messages
[2026-01-26T06:43:00Z INFO  mock_email::imap] [IMAP] 172.18.0.1:57628 LOGOUT
[2026-01-26T06:43:00Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:57628 closed
[2026-01-26T06:43:06Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:64042
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64042 LOGIN: "alice@example.com"
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64042 LIST
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64042 LIST completed: 4 mailboxes
[2026-01-26T06:43:06Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:43:06Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 4 email IDs, returning 4 emails
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64042 SELECT: Sent (4 emails)
[2026-01-26T06:43:06Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:43:06Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 4 email IDs, returning 4 emails
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64042 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64042 SEARCH completed: found 4 messages
[2026-01-26T06:43:06Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:43:06Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 4 email IDs, returning 4 emails
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64042 FETCH: mailbox=Sent, sequence=3,4,2,1, data_items=RFC822, matching_indices=[3, 4, 2, 1]
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 3 FETCH (RFC822 {224}
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 4 FETCH (RFC822 {630}
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["Content-Transfer-Encoding", "from", "Subject", "message-id", "Message-ID", "From", "subject", "to", "Date", "To"]
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {225}
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: grace@test.org
    Subject: this is for grace
    Date: Mon, 26 Jan 2026 06:41:05 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding: 7
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r?ti daer"
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 253 bytes (25 header + 225 body + 3 closing)
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "Content-Transfer-Encoding", "message-id", "From", "Date", "Subject", "Message-ID", "subject", "from", "to"]
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {212}
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: charlie@test.org
    Subject: will this work?
    Date: Mon, 26 Jan 2026 06:43:00 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding: 7
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rkdI\n\r\n\rt"
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 240 bytes (25 header + 212 body + 3 closing)
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64042 FETCH completed: fetched 4 messages
[2026-01-26T06:43:06Z INFO  mock_email::imap] [IMAP] 172.18.0.1:64042 LOGOUT
[2026-01-26T06:43:06Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:64042 closed
[2026-01-26T06:43:22Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:63962
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63962 LOGIN: "alice@example.com"
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63962 LIST
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63962 LIST completed: 4 mailboxes
[2026-01-26T06:43:22Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:43:22Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 4 email IDs, returning 4 emails
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63962 SELECT: Sent (4 emails)
[2026-01-26T06:43:22Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:43:22Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 4 email IDs, returning 4 emails
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63962 SEARCH: mailbox=Sent, criteria=ALL SINCE 26-Jan-2026
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63962 SEARCH completed: found 4 messages
[2026-01-26T06:43:22Z INFO  mock_email::store] [STORE] get_mailbox_emails: requested mailbox='Sent', available mailboxes: ["Drafts", "INBOX", "Trash", "Sent"]
[2026-01-26T06:43:22Z INFO  mock_email::store] [STORE] Found mailbox 'Sent' with 4 email IDs, returning 4 emails
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63962 FETCH: mailbox=Sent, sequence=2,4,3,1, data_items=RFC822, matching_indices=[2, 4, 3, 1]
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["Content-Transfer-Encoding", "from", "Subject", "message-id", "Message-ID", "From", "subject", "to", "Date", "To"]
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 2 FETCH (RFC822 {225}
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: grace@test.org
    Subject: this is for grace
    Date: Mon, 26 Jan 2026 06:41:05 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding: 7
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r?ti daer"
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 253 bytes (25 header + 225 body + 3 closing)
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 12 headers: ["Content-Transfer-Encoding", "X-Nostr-Pubkey", "Date", "From", "Message-ID", "message-id", "subject", "X-Nostr-Sig", "Subject", "To", "from", "to"]
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Pubkey: npub1vp5fvfqwen6qwe32qdrdhlzzsyt7hd47q7unfuks7fcplrs80j4s4vm9a3
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header X-Nostr-Sig: ed6be25e8a99afbc18019b2abd4b5ca41ab12ced3c329920cd241c40ad75b12e4d49db9e03377ca647945903de2a0396eff69a08bc3e9a4a1dcd17136ab375cd
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header IS in email.headers
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 4 FETCH (RFC822 {630}
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: UfLLyIU07wQZjysEiRrUWw==?iv=epYBxXE05Vi2Bv2yRwtl+w==
    Date: Mon, 26 Jan 2026 06:33:41 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=ut
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\r-----EGA"
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 658 bytes (25 header + 630 body + 3 closing)
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "from", "message-id", "Date", "to", "Subject", "From", "Message-ID", "subject", "Content-Transfer-Encoding"]
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 3 FETCH (RFC822 {224}
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: bob@test.org
    Subject: checking if this works
    Date: Mon, 26 Jan 2026 06:34:44 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rtxetnial"
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 252 bytes (25 header + 224 body + 3 closing)
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Email has 10 headers: ["To", "Content-Transfer-Encoding", "message-id", "From", "Date", "Subject", "Message-ID", "subject", "from", "to"]
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: Added header Content-Transfer-Encoding: 7bit
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] format_email_rfc822: X-Nostr-Pubkey header NOT in email.headers
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Sending FETCH response: * 1 FETCH (RFC822 {212}
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Email content preview (first 200 chars): From: alice@example.com
    To: charlie@test.org
    Subject: will this work?
    Date: Mon, 26 Jan 2026 06:43:00 +0000
    MIME-Version: 1.0
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding: 7
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Email ends with: "\n\rkdI\n\r\n\rt"
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] Sent complete FETCH response: 240 bytes (25 header + 212 body + 3 closing)
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63962 FETCH completed: fetched 4 messages
[2026-01-26T06:43:22Z INFO  mock_email::imap] [IMAP] 172.18.0.1:63962 LOGOUT
[2026-01-26T06:43:22Z INFO  mock_email::imap] IMAP connection from 172.18.0.1:63962 closed
[2026-01-26T06:43:26Z INFO  mock_email::imap] New IMAP connection from 172.18.0.1:63974
[2026-01-26T06:43:26Z ERROR mock_email::imap] Error handling IMAP connection from 172.18.0.1:63974: stream did not contain valid UTF-8
